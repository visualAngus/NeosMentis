<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeosMentis - Home</title>
    <link rel="icon" href="/logo/logo_B.png">
    <link rel="stylesheet" href="css/new_main.css">
    <link rel="stylesheet" href="css/new_header.css">
    <link rel="stylesheet" href="css/home_page.css">
    <link rel="stylesheet" href="css/notif.css">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
</head>

<body>

    <div class="load_div">
        <div class="loader"></div>  
    </div>

    <header>
        <div class="div_param_acc_tel">
            <div class="ligne"></div>
            <div class="ligne"></div>
            <div class="ligne"></div>
        </div>
        <div class="div_center_header">
            <img src="/logo/logo_N.png" alt="logo">
            <h1>
                NeosMentis
            </h1>
        </div>

        <div class="div_header_r">
            <div class="div_acces_header">
                <div class="div_home_bnt">
                    <a href="/">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.0961 8.10703L10.8461 2.21016C10.843 2.20749 10.8402 2.20462 10.8375 2.20156C10.3607 1.76792 9.6323 1.76792 9.15547 2.20156L9.14688 2.21016L2.90391 8.10703C2.64644 8.34378 2.49995 8.67757 2.5 9.02734V16.25C2.5 16.9404 3.05964 17.5 3.75 17.5H7.5C8.19036 17.5 8.75 16.9404 8.75 16.25V12.5H11.25V16.25C11.25 16.9404 11.8096 17.5 12.5 17.5H16.25C16.9404 17.5 17.5 16.9404 17.5 16.25V9.02734C17.5001 8.67757 17.3536 8.34378 17.0961 8.10703ZM16.25 16.25H12.5V12.5C12.5 11.8096 11.9404 11.25 11.25 11.25H8.75C8.05964 11.25 7.5 11.8096 7.5 12.5V16.25H3.75V9.02734L3.75859 9.01953L10 3.125L16.2422 9.01797L16.2508 9.02578L16.25 16.25Z"/>
                        </svg>
                    </a>
                    <a href="/project">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48" fill="none">
                            <path d="M22 8H8C6.93913 8 5.92172 8.42143 5.17157 9.17157C4.42143 9.92172 4 10.9391 4 12V40C4 41.0609 4.42143 42.0783 5.17157 42.8284C5.92172 43.5786 6.93913 44 8 44H36C37.0609 44 38.0783 43.5786 38.8284 42.8284C39.5786 42.0783 40 41.0609 40 40V26M37 5C37.7956 4.20435 38.8748 3.75736 40 3.75736C41.1252 3.75736 42.2044 4.20435 43 5C43.7956 5.79565 44.2426 6.87478 44.2426 8C44.2426 9.12522 43.7956 10.2044 43 11L24 30L16 32L18 24L37 5Z" stroke="#1E1E1E" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                </div>
            </div>
    
            <div class="div_compte_header">
                <div class="div_profil_bnt">
                    <a href="/log?type=log">Login</a>
                    <a href="/log?type=register">Register</a>
                </div>
            </div>
        </div>

    </header>
    <main>
        <div class="snap_grid">
            <div class="div_snap_big" id="b1">
                <div class="div_snap_small" id="1"></div>
                <div class="div_snap_small" id="2"></div>
                <div class="div_snap_small" id="3"></div>
                <div class="div_snap_small" id="4"></div>
                <div class="div_snap_small" id="5"></div>
                <div class="div_snap_small" id="6"></div>
                <div class="div_snap_small end" id="7"></div>
                <div class="div_snap_small end" id="8"></div>
            </div>
            <div class="div_snap_big" id="b2">
                <div class="div_snap_small" id="9"></div>
                <div class="div_snap_small" id="10"></div>
                <div class="div_snap_small" id="11"></div>
                <div class="div_snap_small" id="12"></div>
                <div class="div_snap_small" id="13"></div>
                <div class="div_snap_small" id="14"></div>
                <div class="div_snap_small end" id="15"></div>
                <div class="div_snap_small end" id="16"></div>
            </div>
            <div class="div_snap_big" id="b3">
                <div class="div_snap_small" id="17"></div>
                <div class="div_snap_small" id="18"></div>
                <div class="div_snap_small" id="19"></div>
                <div class="div_snap_small" id="20"></div>
                <div class="div_snap_small" id="21"></div>
                <div class="div_snap_small" id="22"></div>
                <div class="div_snap_small end" id="23"></div>
                <div class="div_snap_small end" id="24"></div>
            </div>
            <div class="div_snap_big" id="b4">
                <div class="div_snap_small" id="25"></div>
                <div class="div_snap_small" id="26"></div>
                <div class="div_snap_small" id="27"></div>
                <div class="div_snap_small" id="28"></div>
                <div class="div_snap_small" id="29"></div>
                <div class="div_snap_small" id="30"></div>
                <div class="div_snap_small end" id="31"></div>
                <div class="div_snap_small end" id="32"></div>
            </div>
            <div class="div_snap_big" id="b5">
                <div class="div_snap_small" id="33"></div>
                <div class="div_snap_small" id="34"></div>
                <div class="div_snap_small" id="35"></div>
                <div class="div_snap_small" id="36"></div>
                <div class="div_snap_small" id="37"></div>
                <div class="div_snap_small" id="38"></div>
                <div class="div_snap_small end" id="39"></div>
                <div class="div_snap_small end" id="40"></div>
            </div>
            <div class="div_snap_big" id="b6">
                <div class="div_snap_small" id="41"></div>
                <div class="div_snap_small" id="42"></div>
                <div class="div_snap_small" id="43"></div>
                <div class="div_snap_small" id="44"></div>
                <div class="div_snap_small" id="45"></div>
                <div class="div_snap_small" id="46"></div>
                <div class="div_snap_small end" id="47"></div>
                <div class="div_snap_small end" id="48"></div>
            </div>
            <div class="div_snap_big" id="b7">
                <div class="div_snap_small" id="49"></div>
                <div class="div_snap_small" id="50"></div>
                <div class="div_snap_small" id="51"></div>
                <div class="div_snap_small" id="52"></div>
                <div class="div_snap_small" id="53"></div>
                <div class="div_snap_small" id="54"></div>
                <div class="div_snap_small end" id="55"></div>
                <div class="div_snap_small end" id="56"></div>
            </div>
            <div class="div_snap_big" id="b8">
                <div class="div_snap_small" id="57"></div>
                <div class="div_snap_small" id="58"></div>
                <div class="div_snap_small" id="59"></div>
                <div class="div_snap_small" id="60"></div>
                <div class="div_snap_small" id="61"></div>
                <div class="div_snap_small" id="62"></div>
                <div class="div_snap_small end" id="63"></div>
                <div class="div_snap_small end" id="64"></div>
            </div>
        </div>
        <!-- <div class="div_event green document">
            <div class="div_header_event">
                <div class="div_round_trou hand"></div>
                <div class="div_document_titre">
                    <h2>Documents</h2>
                </div>
                <div class="div_round_pointe"></div>
            </div>

            <div class="div_content">
                <div class="div_doc">
                    <h2>Document 1</h2>
                </div>
            </div>
        </div> -->

    </main>


    <div class="div_background">
    </div>
</body>
<script src="js/home_page_document.js"></script>
<script src="js/collaborator.js"></script>
<script src="js/home_agenda.js"></script>
<script src="js/notif.js"></script>
<script>

    // desactiver le clique droit de base
    document.addEventListener('contextmenu', event => event.preventDefault());

    function removeContextMenu() {
        const contextmenu = document.querySelector('.contextmenu');
        if (contextmenu) {
            contextmenu.remove();
        }
    }

    function contextmenu(x, y, id_doc) {
        let remove = false;
        removeContextMenu()
        const div = document.createElement('div');
        div.classList.add('contextmenu');

        const div1 = document.createElement('div');
        div1.className = 'contextmenu-item';
        div1.id = 'delete';
        div1.innerHTML = 'Delete';
        div1.addEventListener('click', () => {
            if (!remove) {
                div1.style.backgroundColor = 'var(--rouge)';
                remove = true;
            } else {
                console.log('delete');
                remove_document(id_doc);
            }
        });

        const div2 = document.createElement('div');
        div2.className = 'contextmenu-item';
        div2.id = 'edit';
        div2.innerHTML = 'Edit';
        div2.addEventListener('click', () => {
            console.log('edit');
        });

        div.appendChild(div1);
        div.appendChild(div2);


        div.style.left = `${x}px`;
        div.style.top = `${y}px`;

        document.body.appendChild(div);
    }

    // gÃ©rer le clique droit sur les divs
    document.addEventListener('mousedown', (e) => {
        if (e.button === 2) {
            if (e.target.classList.contains('div_doc')) {
                contextmenu(e.clientX, e.clientY, e.target.id);
            }

        }
    });

    // rajouter 5 div_round 
    for (let i = 0; i < 20; i++) {
        const div = document.createElement('div');
        div.classList.add('div_round');

        // Set random values as CSS custom properties
        div.style.setProperty('--x', `${Math.floor(Math.random() * 100)}vw`);
        div.style.setProperty('--y', `${Math.floor(Math.random() * 100)}vh`);
        div.style.setProperty('--size', `${Math.floor(Math.random() * 100) + 5}px`);
        div.style.setProperty('--move_x', `${(Math.random() * 500 + 5) * -1}px`);
        div.style.setProperty('--move_y', `${(Math.random() * 500 + 5) * -1}px`);

        let speed = Math.floor(Math.random() * 10) + 5;
        div.style.setProperty('--speed', `${speed}s`);

        setInterval(() => {
            div.style.setProperty('--size', `${Math.floor(Math.random() * 100) + 5}px`);
            if (Math.random() < 0.5) {
                div.style.setProperty('--move_x', `${(Math.random() * 500 + 5) * -1}px`);
            } else {
                div.style.setProperty('--move_x', `${(Math.random() * 500 + 5)}px`);
            }

            if (Math.random() > 0.5) {
                div.style.setProperty('--move_y', `${(Math.random() * 500 + 5) * -1}px`);
            } else {
                div.style.setProperty('--move_y', `${(Math.random() * 500 + 5)}px`);
            }
        }, speed * 1000);
        document.querySelector('.div_background').appendChild(div);
    }



    // boucle d'update 

    setInterval(async () => {
        let active_menu = document.querySelector('.active_menu');
        if (active_menu) {
            console.log('active_menu');
            active_menu.click();
        }

        await have_request_collaborator().then(data => {
            if (data.requests.length == 0){
                return;
            }
            list_notif_texte.push("Vous avez "+data.requests.length+" demande"+(data.requests.length > 1 ? "s" : "")+" de collaborateur"+(data.requests.length > 1 ? "s" : ""));
        });
    }, 10000);

</script>

</html>